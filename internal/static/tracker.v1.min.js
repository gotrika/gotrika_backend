function e(e){return e.toString(16).padStart(2,"0")}function t(t){var a=new Uint8Array((t||40)/2);return window.crypto.getRandomValues(a),Array.from(a,e).join("")}function a(){return new Date}function i(e){var t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Math.floor(t/1e3)}var n={code:null,url:null,heartbeatTaskId:null,heartbeatID:t(25),validateEvent:function(e){console.log(e.target);["button","form","a"].includes(e.target.localName)&&n._sendEvent(e)},setEnterUrl:function(){return null===localStorage.getItem("_GOtrika_enter_url")&&localStorage.setItem("_GOtrika_enter_url",window.document.href),hash_id},_sendEvent:function(e){var s=e.target.href||"",r={class_name:e.target.className,event_type:e.target.localName,page:window.location.href,page_title:document.title,visitor_id:n.getVisitorId(),session_id:n.getSessionId(),client_timestamp:Math.floor(a().getTime()/1e3),hit_url:s},o={site_id:n.code,type:"event",hash_id:t(),timestamp:i(a()),tracker_data:r};try{var l=new XMLHttpRequest;l.open("POST",n.url,!0),l.setRequestHeader("Content-Type","application/json"),l.send(JSON.stringify(o))}catch(e){console.log(e)}},getHashId:function(){var e=localStorage.getItem("_GOtrika_hash_id")||t();return localStorage.setItem("_GOtrika_hash_id",e),e},Init:function(e,t){n.code=e,n.url=t},getVisitorId:function(){var e=localStorage.getItem("_GOtrika_visitor_id")||t(25);return localStorage.setItem("_GOtrika_visitor_id",e),e},getSessionId:function(){return localStorage.getItem("_GOtrika_session_id")},getSessionTimestamp:function(){return localStorage.getItem("_GOtrika_session_timestamp")},setVisitId:function(){var e=localStorage.getItem("_GOtrika_session_id")||t(),n=i(a()),s=localStorage.getItem("_GOtrika_session_timestamp")||0;0===s?localStorage.setItem("_GOtrika_session_timestamp",n):s+1800<n&&(e=t(),hash_id=t(),localStorage.setItem("_GOtrika_hash_id",hash_id),localStorage.setItem("_GOtrika_session_timestamp",n)),localStorage.setItem("_GOtrika_session_id",e)},_sendVisit:function(){var e={referrer:document.referrer,location:window.location.href,user_screen_width:screen.width,user_screen_height:screen.height,client_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,user_agent:navigator.userAgent,visitor_id:n.getVisitorId(),session_id:n.getSessionId(),session_timestamp:n.getSessionTimestamp()},s={site_id:n.code,type:"session",hash_id:t(),timestamp:i(a()),tracker_data:e};try{var r=new XMLHttpRequest;r.open("POST",n.url+"visit/?site_id="+n.code,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(s))}catch(e){console.log(e)}},newPageLoad:function(e){null!=n.heartbeatTaskId&&clearInterval(n.heartbeatTaskId),n.setVisitId(),n.setEnterUrl(),n.heartbeatTaskId=setInterval(n._sendVisit,parseInt("900000000")),n._sendVisit()}};window.addEventListener("load",n.newPageLoad),document.addEventListener("click",n.validateEvent),document.addEventListener("submit",n.validateEvent);var GOtrika=n;