function dec2hex(e){return e.toString(16).padStart(2,"0")}function generateId(e){var t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,dec2hex).join("")}function getNow(){return new Date}function getUTC(e){return Math.floor(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())/1e3)}var GOtrika={code:null,url:null,heartbeatTaskId:null,heartbeatID:generateId(25),validateEvent:function(e){console.log(e.target),["button","form","a"].includes(e.target.localName)&&GOtrika._sendEvent(e)},_sendEvent:function(e){var t=e.target.href||"",i={class_name:e.target.className,event_type:e.target.localName,page:window.location.href,page_title:document.title,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),client_timestamp:Math.floor(getNow().getTime()/1e3),hit_url:t},a={site_id:GOtrika.code,type:"event",hash_id:generateId(),timestamp:getUTC(getNow()),tracker_data:i};try{var r=new XMLHttpRequest;r.open("POST",GOtrika.url,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(a))}catch(n){console.log(n)}},getHashId:function(){var e=localStorage.getItem("_GOtrika_hash_id")||generateId();return localStorage.setItem("_GOtrika_hash_id",e),e},Init:function(e,t){GOtrika.code=e,GOtrika.url=t},getVisitorId:function(){var e=localStorage.getItem("_GOtrika_visitor_id")||generateId(25);return localStorage.setItem("_GOtrika_visitor_id",e),e},getSessionId:function(){return localStorage.getItem("_GOtrika_session_id")},getSessionTimestamp:function(){return localStorage.getItem("_GOtrika_session_timestamp")},setVisitId:function(){var e=localStorage.getItem("_GOtrika_session_id")||generateId(),t=getNow(),i=getUTC(t),a=localStorage.getItem("_GOtrika_session_timestamp")||0;0===a?localStorage.setItem("_GOtrika_session_timestamp",i):a+1800<i&&(e=generateId(),hash_id=generateId(),localStorage.setItem("_GOtrika_hash_id",hash_id),localStorage.setItem("_GOtrika_session_timestamp",i)),localStorage.setItem("_GOtrika_session_id",e)},_sendVisit:function(){var e={referrer:document.referrer,location:window.location.href,user_screen_width:screen.width,user_screen_height:screen.height,client_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,user_agent:navigator.userAgent,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),session_timestamp:GOtrika.getSessionTimestamp()},t={site_id:GOtrika.code,type:"session",hash_id:generateId(),timestamp:getUTC(getNow()),tracker_data:e};try{var i=new XMLHttpRequest;i.open("POST",GOtrika.url+"visit/?site_id="+GOtrika.code,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(t))}catch(a){console.log(a)}},newPageLoad:function(e){console.log(e),null!=GOtrika.heartbeatTaskId&&clearInterval(GOtrika.heartbeatTaskId),GOtrika.setVisitId(),GOtrika.heartbeatTaskId=setInterval(GOtrika._sendVisit,parseInt("900000000")),GOtrika._sendVisit()}};window.addEventListener("load",GOtrika.newPageLoad),document.addEventListener("click",GOtrika.validateEvent),document.addEventListener("submit",GOtrika.validateEvent);