function dec2hex(t){return t.toString(16).padStart(2,"0")}function generateId(t){var e=new Uint8Array((t||40)/2);return window.crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function getNow(){return new Date}function getUTC(t){return Math.floor(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())/1e3)}var GOtrika={code:null,url:null,heartbeatTaskId:null,heartbeatID:generateId(25),validateEvent:function(t){console.log(t.target),["button","form","a"].includes(t.target.localName)&&GOtrika._sendEvent(t)},_sendEvent:function(t){var e=t.target.href||"",i={class_name:t.target.className,event_type:t.target.localName,page:window.location.href,page_title:document.title,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),client_timestamp:Math.floor(getNow().getTime()/1e3),hit_url:e},a={hash_id:generateId(),timestamp:getUTC(getNow()),tracked_event_data:i};try{var r=new XMLHttpRequest;r.open("POST",GOtrika.url+"event/?site_id="+GOtrika.code,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(a))}catch(n){console.log(n)}},getHashId:function(){var t=localStorage.getItem("_GOtrika_hash_id")||generateId();return localStorage.setItem("_GOtrika_hash_id",t),t},Init:function(t,e){GOtrika.code=t,GOtrika.url=e},getVisitorId:function(){var t=localStorage.getItem("_GOtrika_visitor_id")||generateId(25);return localStorage.setItem("_GOtrika_visitor_id",t),t},getSessionId:function(){return localStorage.getItem("_GOtrika_session_id")},getSessionTimestamp:function(){return localStorage.getItem("_GOtrika_session_timestamp")},setVisitId:function(){var t=localStorage.getItem("_GOtrika_session_id")||generateId(),e=getNow(),i=getUTC(e),a=localStorage.getItem("_GOtrika_session_timestamp")||0;0===a?localStorage.setItem("_GOtrika_session_timestamp",i):a+1800<i&&(t=generateId(),hash_id=generateId(),localStorage.setItem("_GOtrika_hash_id",hash_id),localStorage.setItem("_GOtrika_session_timestamp",i)),localStorage.setItem("_GOtrika_session_id",t)},_sendVisit:function(){var t={type:"visit",referrer:document.referrer,location:window.location.href,user_screen_width:screen.width,user_screen_height:screen.height,client_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,user_agent:navigator.userAgent,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),session_timestamp:GOtrika.getSessionTimestamp()},e={hash_id:GOtrika.getHashId(),timestamp:getUTC(getNow()),tracked_data:t};try{var i=new XMLHttpRequest;i.open("POST",GOtrika.url+"visit/?site_id="+GOtrika.code,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(e))}catch(a){console.log(a)}},newPageLoad:function(t){console.log(t),null!=GOtrika.heartbeatTaskId&&clearInterval(GOtrika.heartbeatTaskId),GOtrika.setVisitId(),GOtrika.heartbeatTaskId=setInterval(GOtrika._sendVisit,parseInt("900000000")),GOtrika._sendVisit()}};window.addEventListener("load",GOtrika.newPageLoad),document.addEventListener("click",GOtrika.validateEvent),document.addEventListener("submit",GOtrika.validateEvent);