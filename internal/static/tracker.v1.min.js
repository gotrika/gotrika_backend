function dec2hex(e){return e.toString(16).padStart(2,"0")}function generateId(e){var t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,dec2hex).join("")}function getNow(){return new Date}function getUTC(e){return Math.floor(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())/1e3)}var GOtrika={code:null,url:null,heartbeatTaskId:null,heartbeatID:generateId(25),validateEvent:function(e){["button","form","a"].includes(e.target.localName)&&GOtrika._sendEvent(e)},setEnterUrl:function(){var e=localStorage.getItem("_GOtrika_enter_url")||window.document.href;return null===e&&localStorage.setItem("_GOtrika_enter_url",window.document.href),e},_sendEvent:function(e){var t=e.target.href||"",i={class_name:e.target.className||"",event_type:e.target.localName||"",page:window.location.href,page_title:document.title,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),client_timestamp:Math.floor(getNow().getTime()/1e3),hit_url:t,referrer:document.referrer},r={site_id:GOtrika.code,type:"event",hash_id:generateId(),timestamp:getUTC(getNow()),tracker_data:i};try{var n=new XMLHttpRequest;n.open("POST",GOtrika.url,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(r))}catch(a){console.log(a)}},getHashId:function(){var e=localStorage.getItem("_GOtrika_hash_id")||generateId();return localStorage.setItem("_GOtrika_hash_id",e),e},Init:function(e,t){GOtrika.code=e,GOtrika.url=t},getVisitorId:function(){var e=localStorage.getItem("_GOtrika_visitor_id")||generateId(25);return localStorage.setItem("_GOtrika_visitor_id",e),e},getSessionId:function(){return localStorage.getItem("_GOtrika_session_id")},getEnterURL:function(){var e=localStorage.getItem("_GOtrika_session_enter_url");return void 0===e&&(localStorage.setItem("_GOtrika_session_enter_url",window.location.href),e=window.location.href),e},getSessionTimestamp:function(){return localStorage.getItem("_GOtrika_session_timestamp")},setVisitId:function(){var e=localStorage.getItem("_GOtrika_session_id")||generateId(),t=getNow(),i=getUTC(t),r=localStorage.getItem("_GOtrika_session_timestamp")||0;0===r?localStorage.setItem("_GOtrika_session_timestamp",i):r+1800<i&&(e=generateId(),hash_id=generateId(),localStorage.setItem("_GOtrika_hash_id",hash_id),localStorage.setItem("_GOtrika_session_timestamp",i)),localStorage.setItem("_GOtrika_session_id",e)},_setSessionExpired:function(){var e=getUTC(getNow())+3600;localStorage.setItem("_GOtrika_session_expired",e)},_getSessionExpired:function(){return localStorage.getItem("_GOtrika_session_expired")||"0"},_sendVisit:function(){var e={referrer:document.referrer,location:window.location.href,enter_url:GOtrika.getEnterURL(),user_screen_width:screen.width,user_screen_height:screen.height,client_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,user_agent:navigator.userAgent,visitor_id:GOtrika.getVisitorId(),session_id:GOtrika.getSessionId(),session_timestamp:parseInt(GOtrika.getSessionTimestamp())},t={site_id:GOtrika.code,type:"session",hash_id:generateId(),timestamp:getUTC(getNow()),tracker_data:e};try{var i=new XMLHttpRequest;i.open("POST",GOtrika.url,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(t))}catch(r){console.log(r)}},newPageLoad:function(e){if(now_timestamp=getUTC(getNow()),session_exp=parseInt(GOtrika._getSessionExpired()),now_timestamp>=session_exp)GOtrika._setSessionExpired(),GOtrika.setVisitId(),GOtrika.setEnterUrl(),GOtrika._sendVisit();else if(0!==session_exp){GOtrika._sendEvent(e);return}null!=GOtrika.heartbeatTaskId&&clearInterval(GOtrika.heartbeatTaskId),GOtrika.heartbeatTaskId=setInterval(GOtrika._sendVisit,36e5)}};window.addEventListener("load",GOtrika.newPageLoad),document.addEventListener("click",GOtrika.validateEvent),document.addEventListener("submit",GOtrika.validateEvent);